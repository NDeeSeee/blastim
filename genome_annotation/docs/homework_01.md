# Домашнее задание 1 (~ 60 минут): функциональный профиль штамма + кейс-расследование

**Организм:** *Bacillus subtilis* 168 (модельный штамм)

## Цель

После запуска пайплайна (Prokka -> DIAMOND -> Pfam) нужно сделать две вещи, которые реально делают в лаборатории:

1. **Быстрый функциональный профиль штамма** — грубая, но полезная картина "что умеет этот организм" по аннотированным генам.
2. **Кейс-расследование** — разбор одной сомнительной или неполной аннотации.

---

## Как сдаём (Git-практика)

1. Сделайте **fork** репозитория преподавателя к себе в GitHub.
2. Клонируйте свой fork, создайте ветку:
   ```bash
   git checkout -b hw1-<github_username>
   ```
3. Запустите назначение персональных генов:
   ```bash
   export GITHUB_USER=<ваш_github_username>
   python scripts/90_homework_assign_genes.py \
     --run_dir outputs/<ваш_run_папка> \
     --out homework/submissions/$GITHUB_USER/genes_$GITHUB_USER.txt
   ```
4. Скопируйте шаблоны в свою папку:
   ```bash
   mkdir -p homework/submissions/$GITHUB_USER
   cp homework/TEMPLATE_summary.md homework/submissions/$GITHUB_USER/summary_$GITHUB_USER.md
   cp homework/TEMPLATE_case.md    homework/submissions/$GITHUB_USER/case_$GITHUB_USER.md
   ```
5. Заполните два файла, затем:
   ```bash
   git add homework/submissions/$GITHUB_USER/
   git commit -m "HW1: $GITHUB_USER"
   git push origin hw1-$GITHUB_USER
   ```
6. Откройте **Pull Request** в основной репозиторий преподавателя.

---

## Индивидуализация

Каждому студенту назначается персональный набор из 8 генов (детерминированно по GitHub username). Скрипт `90_homework_assign_genes.py` выбирает гены, для которых есть записи и в DIAMOND, и в Pfam, чтобы у каждого был материал для анализа.

---

## Часть 1 (30-35 минут): Мини-профиль штамма

**Файл для сдачи:** `homework/submissions/<user>/summary_<user>.md`

Заполните 6 функциональных блоков (по 2-4 гена в каждом; можно использовать как гены из персонального списка, так и найденные самостоятельно):

1. **Репликация / ремонт ДНК**
2. **Транскрипция / трансляция** (housekeeping)
3. **Метаболизм** (любой один путь на ваш выбор)
4. **Транспорт / мембраны**
5. **Регуляция** (HTH, two-component, kinases и т.п.)
6. **Стресс-ответ / споры** (если встретили)

Для каждого выбранного гена укажите 4 строки:

- **Prokka product** (как записано в GFF/TSV)
- **DIAMOND:** identity, e-value, coverage (length/qlen) и best hit title
- **Pfam:** 1-2 домена (название + e-value)
- **Вывод** (1 фраза: "почему evidence согласуется")

> Реалистичный смысл: это похоже на то, как быстро делают функциональную сводку для нового штамма перед экспериментами.

---

## Часть 2 (20-25 минут): Кейс-расследование

**Файл для сдачи:** `homework/submissions/<user>/case_<user>.md`

Выберите **1 ген** (желательно из персонального списка), который выглядит сомнительно. Примеры:

- E-value хороший, но coverage низкий -> совпал только домен/мотив
- Pfam домены не поддерживают слишком конкретный product от Prokka
- Белок сильно короче/длиннее, чем аналоги -> подозрение на границы CDS
- Prokka написал "hypothetical protein", но Pfam даёт понятный класс
- Top hits в DIAMOND дают разные функции -> семейство паралогов

Оформите как мини bug-report (формат жёсткий):

1. **Gene ID** + текущая аннотация Prokka
2. **DIAMOND evidence** (одна строка из TSV + интерпретация)
3. **Pfam evidence** (домены + интерпретация)
4. **1-2 гипотезы** почему аннотация сомнительна
5. **Предложение** более честной аннотации (переписать product)
6. **Как бы проверили дальше** (1-2 идеи)

> Реалистичный смысл: это как задача в реальном проекте — "у нас странный ген, надо понять, что это".

---

## Самопроверка (опционально)

```bash
python scripts/91_homework_check.py --user $GITHUB_USER
```

Скрипт проверит, что файлы существуют и содержат минимальные ключевые слова.

Или через Make:

```bash
make homework-check
```

---

## Критерии оценивания (5 баллов)

| Балл | Критерий |
|------|----------|
| 1 | Логичный выбор генов и блоков |
| 2 | Корректная интерпретация coverage + e-value (а не только identity) |
| 3 | Pfam действительно поддерживает или опровергает |
| 4 | "Правка product" аккуратная и честная |
| 5 | Понятный и компактный отчёт |
