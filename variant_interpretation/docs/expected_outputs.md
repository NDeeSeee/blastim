# Ожидаемые результаты практикума

## Входные данные

| Файл | Содержимое |
|------|-----------|
| `data/input/demo_variants.vcf` | 20 вариантов: TP53, BRCA1, BRAF, EGFR, PIK3CA |
| `data/input/demo_sv.vcf` | 5 структурных вариантов (DEL, DUP, INV) |
| `data/input/demo_variants_vep.tsv` | Предобработанная VEP аннотация (20 записей) |

---

## Шаг 10: VEP аннотация (`outputs/<run>/vep/vep_output.tsv`)

| Ожидаемый показатель | Значение |
|---------------------|---------|
| Строк данных (не заголовок) | 20 |
| Колонок в TSV | 14 (+ Extra поля) |
| Варианты с CANONICAL=YES | ≥15 (все canonical транскрипты) |
| HGVSp присутствует | ≥12 вариантов (только белок-кодирующие) |
| gnomADe_AF присутствует | ≥18 вариантов |

**Проверка:**
```bash
grep -vc "^#" outputs/run_*/vep/vep_output.tsv
# Ожидается: 20
```

---

## Шаг 20: Приоритизация (`outputs/<run>/prioritized.tsv`)

| Ожидаемый показатель | Значение |
|---------------------|---------|
| Строк (не считая заголовок) | 12–18 (только canonical) |
| Вариант с наивысшим score | ≥8 (rs80357906: BRCA1 frameshift или rs28934574: TP53 R175H) |
| Варианты с score ≥ 6 | ≥4 |
| Варианты с IMPACT=HIGH | 3–5 |

**Распределение по IMPACT (ожидаемое):**

| IMPACT | Ожидаемое количество |
|--------|---------------------|
| HIGH | 3–5 |
| MODERATE | 8–12 |
| LOW | 2–4 |
| MODIFIER | 1–3 |

**Пример топ-5 (приоритизация по скору):**

| Ранг | Ген | Consequence | IMPACT | Скор |
|------|-----|-------------|--------|------|
| 1 | BRCA1 | frameshift_variant | HIGH | 8 |
| 2 | TP53 | stop_gained | HIGH | 8 |
| 3 | TP53 | missense_variant | HIGH | 7 |
| 4 | EGFR | missense_variant | MODERATE | 5 |
| 5 | BRAF | missense_variant | MODERATE | 5 |

---

## Шаг 21: Отчёт (`outputs/<run>/report.md`)

Markdown-файл содержит:
- Сводная таблица по IMPACT
- Топ-5 генов по количеству вариантов
- Топ-5 приоритетных вариантов с HGVSp и ClinVar
- Пример каждого класса consequences
- Секция SV/CNV (ссылка на шаг 30)

---

## Шаг 30: SV демо (`outputs/<run>/sv/`)

| Файл | Содержимое |
|------|-----------|
| `sv_annotated.tsv` | 5 SV записей с типом, размером, геном и интерпретацией |

**Ожидаемые SV:**

| ID | SVTYPE | Размер | Ген |
|----|--------|--------|-----|
| SV001 | DEL | 20,000 bp | TP53 |
| SV002 | DUP | 500,000 bp | BRCA1 |
| SV003 | INV | 200,000 bp | BRAF |
| SV004 | DUP | 194,000 bp | EGFR (LowQual) |
| SV005 | DEL | 1,500 bp | . |

---

## Структура выходной директории

```
outputs/run_YYYYMMDD_HHMMSS/
├── vep/
│   └── vep_output.tsv         # VEP аннотация (шаг 10)
├── sv/
│   └── sv_annotated.tsv       # SV интерпретация (шаг 30)
├── prioritized.tsv            # Приоритизированные варианты (шаг 20)
├── report.md                  # Итоговый отчёт (шаг 21)
└── modern_tools_overview.md   # Контекст (шаг 40, если запущен)
```

---

## Тайминг (ожидаемое)

| Шаг | Режим REST | Режим offline |
|-----|-----------|--------------|
| 10 (VEP) | 30–120 с | 10–60 с |
| 20 (приоритизация) | <5 с | <5 с |
| 21 (отчёт) | <5 с | <5 с |
| 30 (SV демо) | <5 с | <5 с |
| **Полный пайплайн** | **~2 мин** | **~1 мин** |

Если VEP REST API недоступен — используется предобработанный файл (< 1 с).
